# Simplified Logic for Green Detection and Blur
import cv2
import numpy as np

# Define the "Green" color range
lower_green = np.array([35, 100, 100])
upper_green = np.array([85, 255, 255])

def process_frame(frame):
    # 1. Convert to HSV
    hsv = cv2.cvtColor(frame, cv2.COLOR_BGR2HSV)
    
    # 2. Find green parts
    mask = cv2.inRange(hsv, lower_green, upper_green)
    
    # 3. Create a blurred version of the whole frame
    blurred_frame = cv2.GaussianBlur(frame, (25, 25), 0)
    
    # 4. Only keep the blur where the mask is green
    # Otherwise, keep the original frame (Wall A / Black)
    output = np.where(mask[:, :, None] == 255, blurred_frame, frame)
    
    return output
